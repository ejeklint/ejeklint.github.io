<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>An internet connected soil moisture sensor | My blog</title>
    <meta name="description" content="The Electric Imp makes it so easy to put things on the web to make that web of things everyone is talking about. I decided to build a soil moisture sensor that alerts when pl ...">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/assets/css/0.styles.9423e3c8.css" as="style"><link rel="preload" href="/assets/js/app.b86a8c6b.js" as="script"><link rel="preload" href="/assets/js/4.8c7e109f.js" as="script"><link rel="preload" href="/assets/js/5.a82a693a.js" as="script"><link rel="preload" href="/assets/js/21.5e5ed2b7.js" as="script"><link rel="prefetch" href="/assets/js/1.b12c199c.js"><link rel="prefetch" href="/assets/js/10.99a566dd.js"><link rel="prefetch" href="/assets/js/11.4574c3fd.js"><link rel="prefetch" href="/assets/js/12.404f5207.js"><link rel="prefetch" href="/assets/js/13.575b781d.js"><link rel="prefetch" href="/assets/js/14.4a6acc4a.js"><link rel="prefetch" href="/assets/js/15.47bab81b.js"><link rel="prefetch" href="/assets/js/16.d6661b68.js"><link rel="prefetch" href="/assets/js/17.b73a3007.js"><link rel="prefetch" href="/assets/js/18.06738c64.js"><link rel="prefetch" href="/assets/js/19.28984759.js"><link rel="prefetch" href="/assets/js/20.3a105bd6.js"><link rel="prefetch" href="/assets/js/22.1e721f97.js"><link rel="prefetch" href="/assets/js/23.bdc1b330.js"><link rel="prefetch" href="/assets/js/24.b1ecf9ff.js"><link rel="prefetch" href="/assets/js/6.16402cee.js"><link rel="prefetch" href="/assets/js/7.b2356e70.js"><link rel="prefetch" href="/assets/js/8.c845360f.js"><link rel="prefetch" href="/assets/js/9.d40b0488.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.b369032b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9423e3c8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">My blog </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">My blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><div class="vuepress-blog-theme-content"><h1 class="post-title">An internet connected soil moisture sensor</h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> 2013-03-13
  </div> <ul class="post-meta-tags"><li class="post-tag" data-v-d832e844><a href="/tag/development" data-v-d832e844> development </a></li><li class="post-tag" data-v-d832e844><a href="/tag/weather" data-v-d832e844> weather </a></li></ul></div> <div class="content__default"><p>The <a href="http://electricimp.com" target="_blank" rel="noopener noreferrer">Electric Imp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> makes it so easy to put things on the web to make that web of things everyone is talking about. I decided to build a soil moisture sensor that alerts when plants need watering. This my oh-so extensive list of requirements:</p> <ul><li>It should connect to the net and log to <a href="http://cosm.com" target="_blank" rel="noopener noreferrer">Cosm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>It should send SMS or other notifications when attention is needed</li> <li>It should monitor soil moisture <em>and</em> water level so you either stick the sensor in the soil and measure VWC (Volumetric Water Content) or put it in a self-watering pot where it measures water level</li> <li>It should run on solar power with battery backup</li> <li>It should not be awfully expensive</li></ul> <p>Some research on the net quickly pointed out a moisture sensor from <a href="http://www.vegetronix.com" target="_blank" rel="noopener noreferrer">Vegetronix<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that measures both moisture and water level. It's super easy to use, solidly built, won't corrode (an almost inevitable fate for cheaper moisture sensors) and operates on very low effect. Perfect for me, except that they are a bit pricey @US$38 each. But WTF, YOLO and so on, they are the best.</p> <p>The Electric Imp is the bridge between the sensor and the net. It has six IO ports that all can handle Analog-to-digital conversion but I decided to limit the number of probes to three, and save the rest of the ports for other needs. One port controls power to the soil probes. One input will monitor battery level. This leaves one IO port for future needs. Here's a sketch of the electronics:</p> <p><img src="http://i.imgur.com/T3WC6Yn.png" alt="Imgur"></p> <p>The soil probe delivers a voltage from 0â€“3 volts depending on how moist it is. I tossed in a simple protective circuit in front of on each input port; a voltage follower with a 3.3V Zener diode to ground that protects from over-voltage and a 1M pull-down resistor to ground that pulls down to 0V if no probe is connected.</p> <p>Then there is a N-type MOS-FET (horribly rendered in the sketch above) connected to an output pin on the imp. Setting the output to high will open the FET and get juice to the probes. I squeezed everything into a little box and use a solar panel boosted rechargeable battery to provide power.</p> <p>Here's the finished prototype:</p> <p><img src="http://i.imgur.com/djbmIrK.jpg" alt="Moisture Guard"></p> <p>The rest is software. Quite simple stuff, but I'm using parts of the electric imps API which still is in closed beta so I'm not allowed to show it until it's officially released. Will update when possible. But basically, the imp wakes up at regular interval, measures, detects if there is a significant change and if so reports to the server part of the Imp solution. The server then decides wether to notify or just log.</p> <p>That's all!</p></div> <!----> <hr> <!----></div> <!----></div></div> <footer class="footer" data-v-582f9766><div class="footer-left-wrap" data-v-582f9766><ul class="contact" data-v-582f9766><li class="contact-item" data-v-582f9766><a href="https://github.com/ejeklint" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-582f9766><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-582f9766><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-582f9766></path></svg>
          
        </a></li><li class="contact-item" data-v-582f9766><a href="https://twitter.com/ejeklint" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-582f9766><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-582f9766><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-582f9766></path></svg>
          
        </a></li><li class="contact-item" data-v-582f9766><a href="https://instagram.com/ejeklint" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-582f9766><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-instagram" data-v-582f9766><rect x="2" y="2" width="20" height="20" rx="5" ry="5" data-v-582f9766></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" data-v-582f9766></path><line x1="17.5" y1="6.5" x2="17.5" y2="6.5" data-v-582f9766></line></svg>
          
        </a></li><li class="contact-item" data-v-582f9766><a href="mailto:per@ejeklint.se" class="nav-link external" data-v-582f9766><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail" data-v-582f9766><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-582f9766></path><polyline points="22,6 12,13 2,6" data-v-582f9766></polyline></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-582f9766><ul class="copyright" data-v-582f9766></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b86a8c6b.js" defer></script><script src="/assets/js/4.8c7e109f.js" defer></script><script src="/assets/js/5.a82a693a.js" defer></script><script src="/assets/js/21.5e5ed2b7.js" defer></script>
  </body>
</html>
