(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{290:function(t,a,s){"use strict";s.r(a);var e=s(5),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("Here's my story on how to set up Raspberry pi to fit my needs. I will use it as a server that controls heating in my summer house and publish data from a weather station I have on the roof. When deployed it will replace a Mac mini that will find more Hollywood-esqe uses.")]),t._v(" "),s("p",[s("em",[t._v("Update Dec 25 2012: In next version of Raspberry's firmware, HIDRAW is enabled by default so there is no need to build the kernel yourself; just update the firmware. I've updated this little tutorial to reflect that. And fixed some typos.")])]),t._v(" "),s("p",[t._v("I downloaded latest Raspbian Wheezy, copied it to an SD card popped it into the Raspberry, booted, ran the setup: expanded file system, set time zone, made sure ssh server is on.")]),t._v(" "),s("p",[t._v("And after a reboot and being an upgrade junkie fired off:")]),t._v(" "),s("div",{staticClass:"language-bsh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo aptitude update\nsudo aptitude dist-upgrade\nsudo apt-get update\nsudo apt-get dist-upgrade\n")])])]),s("p",[t._v("which takes a while so prepare yourself with a nice cup of something to sip on while the screen gets filled with charming ascii chars.")]),t._v(" "),s("h2",{attrs:{id:"essential-services"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#essential-services"}},[t._v("#")]),t._v(" Essential services")]),t._v(" "),s("p",[t._v("I installed "),s("a",{attrs:{href:"http://gettingstartedwithraspberrypi.tumblr.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("netatalk"),s("OutboundLink")],1),t._v(" with "),s("code",[t._v("sudo apt-get install netatalk")]),t._v(" and it just works. Makes nice integration with my mac.")]),t._v(" "),s("p",[t._v("Went on with "),s("a",{attrs:{href:"http://www.tightvnc.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tight VNC Server"),s("OutboundLink")],1),t._v(" with "),s("code",[t._v("sudo apt-get install tightvncserver")]),t._v(" for those moments when you really need to run the GUI and have no monitor.")]),t._v(" "),s("p",[t._v("Then the lovely avahi-daemon (Bonjour server) with "),s("code",[t._v("sudo apt-get install avahi-daemon")]),t._v(". Assured that it starts on boot with "),s("code",[t._v("sudo update-rc.d avahi-daemon defaults")]),t._v(".")]),t._v(" "),s("p",[t._v("Then I made a Bonjour config file ("),s("code",[t._v("sudo nano /etc/avahi/services/multiple.service")]),t._v(") for SSH, VNC and AFP:")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?xml version=\"1.0\" standalone='no'?>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token doctype"}},[t._v('<!DOCTYPE service-group SYSTEM "avahi-service.dtd">')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service-group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("replace-wildcards")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("yes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("%h"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("_device-info._tcp"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("txt-record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("model=RackMac"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("txt-record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("_ssh._tcp"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("22"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("_afpovertcp._tcp"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    \t\t        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("548"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    \t  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("_rfb._tcp"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("5901"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service-group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("Now it's super easy for me to find the Raspberry and mount it on the Mac, or start a Screen sharing session with it. Or just have easy SSH access with "),s("code",[t._v("ssh pi@raspberrypi.local")]),t._v(". What IP did you say?")]),t._v(" "),s("p",[t._v('Note that OS X will pollute network shares with ".AppleDouble" folders, for reasons unknown. Read more '),s("a",{attrs:{href:"http://fabforce.eu/z/blog/?postid=79",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),s("OutboundLink")],1),t._v(" to find and get rid of them once and for all.")]),t._v(" "),s("h2",{attrs:{id:"wifi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wifi"}},[t._v("#")]),t._v(" Wifi")]),t._v(" "),s("p",[t._v("I used the GUI to configure wifi, since the manual configuration only seem to work with WEP encryption. I used screen sharing and did remember to save the wifi config when I was done.")]),t._v(" "),s("h2",{attrs:{id:"programmers-must-have"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#programmers-must-have"}},[t._v("#")]),t._v(" Programmers' must-have")]),t._v(" "),s("p",[t._v("Git of course! "),s("code",[t._v("sudo apt-get install git")]),t._v(". Generate ssh key and let github know about it.")]),t._v(" "),s("p",[t._v("Node.js is a must! Want the fast lane to it? Here's my "),s("a",{attrs:{href:"https://dl.dropbox.com/s/sh3f72vtqcpekv9/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("precompiled package of v0.8.16"),s("OutboundLink")],1),t._v(" if you dare. Just download, expand, cd into it and "),s("code",[t._v("sudo make install")]),t._v(" Build time should be around 10 seconds.")]),t._v(" "),s("p",[t._v("If you want to install node.js from scratch, do like this: "),s("code",[t._v("wget http://nodejs.org/dist/v0.8.16/node-v0.8.16-tar.gz")]),t._v(". Do the "),s("code",[t._v("./configure && make && sudo make install")]),t._v(" voodoo and wait 2 hours. Yes, 2 hours. So the precompiled one does have an edge.")]),t._v(" "),s("p",[s("em",[t._v("For the Arch Linux ARM image, there's a raspberry package "),s("a",{attrs:{href:"https://github.com/TooTallNate/node/downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),s("OutboundLink")],1),t._v(", build by @tootallnate who's a core committer for node.")])]),t._v(" "),s("h2",{attrs:{id:"other-stuff"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#other-stuff"}},[t._v("#")]),t._v(" Other stuff")]),t._v(" "),s("h3",{attrs:{id:"node-hid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-hid"}},[t._v("#")]),t._v(" node-hid")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/hanshuebner/node-hid",target:"_blank",rel:"noopener noreferrer"}},[t._v("node-hid"),s("OutboundLink")],1),t._v(" is a node module for easy access to USB HID devices. It requires "),s("code",[t._v("libudev-dev")]),t._v(" and "),s("code",[t._v("libusb-1.0-0-dev")]),t._v(" so install it with "),s("code",[t._v("sudo apt-get install libudev-dev libusb-1.0-0-dev")]),t._v(" first.")]),t._v(" "),s("p",[t._v("And then I added these USB permissions in a new file "),s("code",[t._v("/etc/udev/rules.d/99-hid.rules")]),t._v(" to enable my particular USB thing:")]),t._v(" "),s("div",{staticClass:"language-bsh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('SUBSYSTEM=="usb", ATTRS{idVendor}=="0fde", ATTRS{idProduct}=="ca01", \\\n    MODE:="666", GROUP="users"\nKERNEL=="hidraw*", ATTRS{idVendor}=="0fde", ATTRS{idProduct}=="ca01", \\\n    MODE:="666", GROUP="users"\n')])])]),s("p",[t._v("You also must update the firmware in your Raspberry to enable raw access to HID devices. Easiest way is to install "),s("a",{attrs:{href:"https://github.com/Hexxeh/rpi-update/",target:"_blank",rel:"noopener noreferrer"}},[t._v("rpi-update"),s("OutboundLink")],1),t._v(". Just follow the instructions to install it. I chose the very latest github commit on the "),s("a",{attrs:{href:"https://github.com/Hexxeh/rpi-firmware/tree/next",target:"_blank",rel:"noopener noreferrer"}},[t._v('"next" branch of the firmware'),s("OutboundLink")],1),t._v(". You should get the git hash of the commit you want to install. In my case: "),s("code",[t._v("sudo rpi-update d0fe451d1e17c1780348d90daa2d45569b09efec")]),t._v(" and reboot when done.")]),t._v(" "),s("p",[t._v("You should now be able interact with your USB device. "),s("em",[t._v("Voilá!")])]),t._v(" "),s("p",[t._v("Oh by the way, make a "),s("a",{attrs:{href:"http://raspberrypi.stackexchange.com/questions/311/how-do-i-backup-my-raspberry-pi",target:"_blank",rel:"noopener noreferrer"}},[t._v("backup"),s("OutboundLink")],1),t._v(" of your SD card now.")])])}),[],!1,null,null,null);a.default=n.exports}}]);